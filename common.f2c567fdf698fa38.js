"use strict";(self.webpackChunkrecuento_inventory=self.webpackChunkrecuento_inventory||[]).push([[76],{9882:(f,h,a)=>{a.d(h,{K:()=>o});var E=a(4412),d=a(7673),c=a(8384),s=a(2025),l=a(4438),D=a(7156);let o=(()=>{class u{constructor(e){this.http=e,this.deliveries=new E.t([]),this.deliveries$=this.deliveries.asObservable(),this.loadDemoData()}loadDemoData(){this.deliveries.next([{id:"1",solicitudPedidoId:"1",numeroSalida:"SAL-2024-001",fechaEntrega:new Date("2024-01-25"),funcionarioAutorizado:"Juan P\xe9rez Rodr\xedguez",funcionarioEntrega:"Mar\xeda Gonz\xe1lez",productos:[{productoId:"1",descripcion:"Laptop HP Pavilion",cantidadSolicitada:2,cantidadEntregada:2,observaciones:"Entregado completo"}],observaciones:"Entrega realizada sin inconvenientes",estado:s.n.ENTREGADO,fechaCreacion:new Date("2024-01-25")}])}getDeliveries(){return this.deliveries$}getDelivery(e){const r=this.deliveries.value.find(i=>i.id===e);return(0,d.of)(r)}getDeliveriesByOrderRequest(e){const r=this.deliveries.value.filter(i=>i.solicitudPedidoId===e);return(0,d.of)(r)}createDelivery(e){const t={id:this.generateId(),solicitudPedidoId:e.solicitudPedidoId,numeroSalida:this.generateDeliveryNumber(),fechaEntrega:new Date(e.fechaEntrega),funcionarioAutorizado:e.funcionarioAutorizado,funcionarioEntrega:e.funcionarioEntrega,productos:e.productos,observaciones:e.observaciones,firmaDigital:e.firmaDigital,estado:this.calculateDeliveryStatus(e.productos),fechaCreacion:new Date};return this.deliveries.next([t,...this.deliveries.value]),(0,d.of)(t).pipe((0,c.c)(500))}calculateDeliveryStatus(e){const t=e.every(i=>i.cantidadEntregada===i.cantidadSolicitada),r=e.every(i=>0===i.cantidadEntregada);return t?s.n.ENTREGADO:r?s.n.PENDIENTE:s.n.PARCIAL}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,5)}generateDeliveryNumber(){const e=new Date;return`SAL-${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}-${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}`}static{this.\u0275fac=function(t){return new(t||u)(l.KVO(D.Qq))}}static{this.\u0275prov=l.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},8415:(f,h,a)=>{a.d(h,{z:()=>D});var E=a(4412),d=a(7673),c=a(8384),s=function(o){return o.PENDIENTE="PENDIENTE",o.APROBADO="APROBADO",o.RECHAZADO="RECHAZADO",o.ENTREGADO="ENTREGADO",o.CANCELADO="CANCELADO",o}(s||{}),l=a(4438);let D=(()=>{class o{constructor(){this.orderRequests=new E.t([]),this.orderRequests$=this.orderRequests.asObservable(),this.loadDemoData()}loadDemoData(){this.orderRequests.next([{id:"1",fecha:new Date("2024-01-15"),numeroPedido:"PED-2024-001",dependencia:"Almac\xe9n Central",productos:[{id:"1",numeroOrden:"001",descripcion:"Laptop HP Pavilion 15.6 pulgadas",cantidadSolicitada:5,observaciones:"Para oficina administrativa"},{id:"2",numeroOrden:"002",descripcion:"Mouse inal\xe1mbrico Logitech",cantidadSolicitada:10,observaciones:"Modelo MX Master 3"}],funcionarioAutorizado:"Juan Carlos P\xe9rez",fechaCreacion:new Date("2024-01-15"),estado:s.PENDIENTE}])}getOrderRequests(){return this.orderRequests$}getOrderRequest(n){const t=this.orderRequests.value.find(r=>r.id===n);return(0,d.of)(t)}createOrderRequest(n){const e={id:this.generateId(),fecha:new Date(n.fecha),numeroPedido:n.numeroPedido,dependencia:n.dependencia,productos:n.productos.map((r,i)=>({...r,id:this.generateId()})),funcionarioAutorizado:n.funcionarioAutorizado,fechaCreacion:new Date,estado:s.PENDIENTE};return this.orderRequests.next([e,...this.orderRequests.value]),(0,d.of)(e).pipe((0,c.c)(500))}updateOrderRequest(n,e){const t=this.orderRequests.value,r=t.findIndex(i=>i.id===n);if(-1!==r){const i={...t[r],fecha:new Date(e.fecha),numeroPedido:e.numeroPedido,dependencia:e.dependencia,productos:e.productos.map(v=>({...v,id:v.id||this.generateId()})),funcionarioAutorizado:e.funcionarioAutorizado};return t[r]=i,this.orderRequests.next([...t]),(0,d.of)(i).pipe((0,c.c)(500))}throw new Error("Solicitud de pedido no encontrada")}deleteOrderRequest(n){const t=this.orderRequests.value.filter(r=>r.id!==n);return this.orderRequests.next(t),(0,d.of)(!0).pipe((0,c.c)(500))}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,5)}generateOrderNumber(){const n=new Date;return`PED-${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}-${Date.now().toString().slice(-4)}`}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()}}]);