"use strict";(self.webpackChunkrecuento_inventory=self.webpackChunkrecuento_inventory||[]).push([[607],{3607:(V,j,m)=>{m.r(j),m.d(j,{ProductFormComponent:()=>W});var x=m(177),F=m(8094),d=m(4341),t=m(4438),T=m(6241);const g=(e,p,o)=>({"bg-primary-600 border-primary-600 text-white":e,"bg-primary-600 border-primary-600 text-white ring-4 ring-primary-100":p,"border-gray-300 text-gray-400":o}),S=(e,p)=>({"bg-primary-600":e,"bg-gray-300":p});function w(e,p){1&e&&(t.qSk(),t.j41(0,"svg",28),t.nrm(1,"path",29),t.k0s())}function O(e,p){if(1&e&&(t.j41(0,"span",30),t.EFF(1),t.k0s()),2&e){const o=t.XpG().$implicit;t.R7$(),t.JRh(o.id)}}function P(e,p){if(1&e&&(t.j41(0,"div",31)(1,"p",32),t.EFF(2),t.k0s(),t.j41(3,"p",33),t.EFF(4),t.k0s()()),2&e){const o=t.XpG().$implicit;t.R7$(2),t.JRh(o.title),t.R7$(2),t.JRh(o.subtitle)}}function N(e,p){if(1&e&&t.nrm(0,"div",34),2&e){const o=t.XpG().$implicit,i=t.XpG();t.Y8G("ngClass",t.l_i(1,S,i.currentStep>o.id,i.currentStep<=o.id))}}function l(e,p){if(1&e&&(t.j41(0,"div",21)(1,"div",22)(2,"div",23),t.DNE(3,w,2,0,"svg",24)(4,O,2,1,"span",25),t.k0s()(),t.DNE(5,P,5,2,"div",26)(6,N,1,4,"div",27),t.k0s()),2&e){const o=p.$implicit,i=p.index,r=t.XpG();t.R7$(2),t.Y8G("ngClass",t.sMw(5,g,r.currentStep>o.id,r.currentStep===o.id,r.currentStep<o.id)),t.R7$(),t.Y8G("ngIf",r.currentStep>o.id),t.R7$(),t.Y8G("ngIf",r.currentStep<=o.id),t.R7$(),t.Y8G("ngIf",r.currentStep===o.id),t.R7$(),t.Y8G("ngIf",i<r.wizardSteps.length-1)}}function s(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El nombre del producto es requerido "),t.k0s())}function v(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," La descripci\xf3n es requerida "),t.k0s())}function C(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," La marca es requerida "),t.k0s())}function D(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El proveedor es requerido "),t.k0s())}function I(e,p){if(1&e&&(t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"div",38),t.k0s(),t.j41(4,"h2",2),t.EFF(5),t.k0s(),t.j41(6,"p",39),t.EFF(7),t.k0s()(),t.j41(8,"div",40)(9,"div",41)(10,"div",42)(11,"label",43),t.EFF(12," Nombre del Producto * "),t.k0s(),t.nrm(13,"input",44),t.DNE(14,s,2,0,"div",45),t.k0s(),t.j41(15,"div",42)(16,"label",46),t.EFF(17," Descripci\xf3n * "),t.k0s(),t.nrm(18,"textarea",47),t.DNE(19,v,2,0,"div",45),t.k0s(),t.j41(20,"div")(21,"label",48),t.EFF(22," Marca * "),t.k0s(),t.nrm(23,"input",49),t.DNE(24,C,2,0,"div",45),t.k0s(),t.j41(25,"div")(26,"label",50),t.EFF(27," Proveedor * "),t.k0s(),t.nrm(28,"input",51),t.DNE(29,D,2,0,"div",45),t.k0s()()()()),2&e){let o,i,r,f,_,b,E,k;const n=t.XpG();t.R7$(3),t.Y8G("innerHTML",n.wizardSteps[0].icon,t.npT),t.R7$(2),t.SpI(" ",n.wizardSteps[0].title," "),t.R7$(2),t.JRh(n.wizardSteps[0].subtitle),t.R7$(6),t.AVh("border-red-500",(null==(o=n.productForm.get("nombre"))?null:o.invalid)&&(null==(o=n.productForm.get("nombre"))?null:o.touched)),t.R7$(),t.Y8G("ngIf",(null==(i=n.productForm.get("nombre"))?null:i.invalid)&&(null==(i=n.productForm.get("nombre"))?null:i.touched)),t.R7$(4),t.AVh("border-red-500",(null==(r=n.productForm.get("descripcion"))?null:r.invalid)&&(null==(r=n.productForm.get("descripcion"))?null:r.touched)),t.R7$(),t.Y8G("ngIf",(null==(f=n.productForm.get("descripcion"))?null:f.invalid)&&(null==(f=n.productForm.get("descripcion"))?null:f.touched)),t.R7$(4),t.AVh("border-red-500",(null==(_=n.productForm.get("marca"))?null:_.invalid)&&(null==(_=n.productForm.get("marca"))?null:_.touched)),t.R7$(),t.Y8G("ngIf",(null==(b=n.productForm.get("marca"))?null:b.invalid)&&(null==(b=n.productForm.get("marca"))?null:b.touched)),t.R7$(4),t.AVh("border-red-500",(null==(E=n.productForm.get("proveedor"))?null:E.invalid)&&(null==(E=n.productForm.get("proveedor"))?null:E.touched)),t.R7$(),t.Y8G("ngIf",(null==(k=n.productForm.get("proveedor"))?null:k.invalid)&&(null==(k=n.productForm.get("proveedor"))?null:k.touched))}}function y(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El c\xf3digo principal es requerido "),t.k0s())}function M(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El c\xf3digo secundario es requerido "),t.k0s())}function $(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El rubro es requerido "),t.k0s())}function G(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," La categor\xeda es requerida "),t.k0s())}function L(e,p){if(1&e&&(t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"div",38),t.k0s(),t.j41(4,"h2",2),t.EFF(5),t.k0s(),t.j41(6,"p",39),t.EFF(7),t.k0s()(),t.j41(8,"div",40)(9,"div",41)(10,"div")(11,"label",53),t.EFF(12," C\xf3digo Principal * "),t.k0s(),t.nrm(13,"input",54),t.DNE(14,y,2,0,"div",45),t.k0s(),t.j41(15,"div")(16,"label",55),t.EFF(17," C\xf3digo Secundario * "),t.k0s(),t.nrm(18,"input",56),t.DNE(19,M,2,0,"div",45),t.k0s(),t.j41(20,"div")(21,"label",57),t.EFF(22," Rubro * "),t.k0s(),t.j41(23,"select",58)(24,"option",59),t.EFF(25,"Seleccione un rubro"),t.k0s(),t.j41(26,"option",60),t.EFF(27,"Electr\xf3nicos"),t.k0s(),t.j41(28,"option",61),t.EFF(29,"Farmacia"),t.k0s(),t.j41(30,"option",62),t.EFF(31,"Alimentos"),t.k0s(),t.j41(32,"option",63),t.EFF(33,"Ropa"),t.k0s(),t.j41(34,"option",64),t.EFF(35,"Hogar"),t.k0s(),t.j41(36,"option",65),t.EFF(37,"Deportes"),t.k0s(),t.j41(38,"option",66),t.EFF(39,"Automotriz"),t.k0s(),t.j41(40,"option",67),t.EFF(41,"Construcci\xf3n"),t.k0s()(),t.DNE(42,$,2,0,"div",45),t.k0s(),t.j41(43,"div")(44,"label",68),t.EFF(45," Categor\xeda * "),t.k0s(),t.nrm(46,"input",69),t.DNE(47,G,2,0,"div",45),t.k0s()()()()),2&e){let o,i,r,f,_,b,E,k;const n=t.XpG();t.R7$(3),t.Y8G("innerHTML",n.wizardSteps[1].icon,t.npT),t.R7$(2),t.SpI(" ",n.wizardSteps[1].title," "),t.R7$(2),t.JRh(n.wizardSteps[1].subtitle),t.R7$(6),t.AVh("border-red-500",(null==(o=n.productForm.get("codigo1"))?null:o.invalid)&&(null==(o=n.productForm.get("codigo1"))?null:o.touched)),t.R7$(),t.Y8G("ngIf",(null==(i=n.productForm.get("codigo1"))?null:i.invalid)&&(null==(i=n.productForm.get("codigo1"))?null:i.touched)),t.R7$(4),t.AVh("border-red-500",(null==(r=n.productForm.get("codigo2"))?null:r.invalid)&&(null==(r=n.productForm.get("codigo2"))?null:r.touched)),t.R7$(),t.Y8G("ngIf",(null==(f=n.productForm.get("codigo2"))?null:f.invalid)&&(null==(f=n.productForm.get("codigo2"))?null:f.touched)),t.R7$(4),t.AVh("border-red-500",(null==(_=n.productForm.get("rubro"))?null:_.invalid)&&(null==(_=n.productForm.get("rubro"))?null:_.touched)),t.R7$(19),t.Y8G("ngIf",(null==(b=n.productForm.get("rubro"))?null:b.invalid)&&(null==(b=n.productForm.get("rubro"))?null:b.touched)),t.R7$(4),t.AVh("border-red-500",(null==(E=n.productForm.get("categoria"))?null:E.invalid)&&(null==(E=n.productForm.get("categoria"))?null:E.touched)),t.R7$(),t.Y8G("ngIf",(null==(k=n.productForm.get("categoria"))?null:k.invalid)&&(null==(k=n.productForm.get("categoria"))?null:k.touched))}}function z(e,p){1&e&&(t.j41(0,"span"),t.EFF(1,"El precio es requerido"),t.k0s())}function B(e,p){1&e&&(t.j41(0,"span"),t.EFF(1,"El precio debe ser mayor a 0"),t.k0s())}function Y(e,p){if(1&e&&(t.j41(0,"div",52),t.DNE(1,z,2,0,"span",83)(2,B,2,0,"span",83),t.k0s()),2&e){let o,i;const r=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(o=r.productForm.get("precio"))||null==o.errors?null:o.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=r.productForm.get("precio"))||null==i.errors?null:i.errors.min)}}function h(e,p){1&e&&(t.j41(0,"span"),t.EFF(1,"La cantidad es requerida"),t.k0s())}function a(e,p){1&e&&(t.j41(0,"span"),t.EFF(1,"La cantidad debe ser 0 o mayor"),t.k0s())}function c(e,p){if(1&e&&(t.j41(0,"div",52),t.DNE(1,h,2,0,"span",83)(2,a,2,0,"span",83),t.k0s()),2&e){let o,i;const r=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(o=r.productForm.get("cantidad"))||null==o.errors?null:o.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=r.productForm.get("cantidad"))||null==i.errors?null:i.errors.min)}}function u(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," El estado es requerido "),t.k0s())}function A(e,p){1&e&&(t.j41(0,"div",52),t.EFF(1," La ubicaci\xf3n es requerida "),t.k0s())}function R(e,p){if(1&e&&(t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"div",38),t.k0s(),t.j41(4,"h2",2),t.EFF(5),t.k0s(),t.j41(6,"p",39),t.EFF(7),t.k0s()(),t.j41(8,"div",40)(9,"div",41)(10,"div")(11,"label",70),t.EFF(12," Precio ($) * "),t.k0s(),t.nrm(13,"input",71),t.DNE(14,Y,3,2,"div",45),t.k0s(),t.j41(15,"div")(16,"label",72),t.EFF(17," Cantidad Inicial * "),t.k0s(),t.nrm(18,"input",73),t.DNE(19,c,3,2,"div",45),t.k0s(),t.j41(20,"div")(21,"label",74),t.EFF(22," Estado * "),t.k0s(),t.j41(23,"select",75)(24,"option",59),t.EFF(25,"Seleccione un estado"),t.k0s(),t.j41(26,"option",76),t.EFF(27,"Activo"),t.k0s(),t.j41(28,"option",77),t.EFF(29,"Inactivo"),t.k0s(),t.j41(30,"option",78),t.EFF(31,"Agotado"),t.k0s(),t.j41(32,"option",79),t.EFF(33,"Vencido"),t.k0s(),t.j41(34,"option",80),t.EFF(35,"Reservado"),t.k0s()(),t.DNE(36,u,2,0,"div",45),t.k0s(),t.j41(37,"div")(38,"label",81),t.EFF(39," Ubicaci\xf3n * "),t.k0s(),t.nrm(40,"input",82),t.DNE(41,A,2,0,"div",45),t.k0s()()()()),2&e){let o,i,r,f,_,b,E,k;const n=t.XpG();t.R7$(3),t.Y8G("innerHTML",n.wizardSteps[2].icon,t.npT),t.R7$(2),t.SpI(" ",n.wizardSteps[2].title," "),t.R7$(2),t.JRh(n.wizardSteps[2].subtitle),t.R7$(6),t.AVh("border-red-500",(null==(o=n.productForm.get("precio"))?null:o.invalid)&&(null==(o=n.productForm.get("precio"))?null:o.touched)),t.R7$(),t.Y8G("ngIf",(null==(i=n.productForm.get("precio"))?null:i.invalid)&&(null==(i=n.productForm.get("precio"))?null:i.touched)),t.R7$(4),t.AVh("border-red-500",(null==(r=n.productForm.get("cantidad"))?null:r.invalid)&&(null==(r=n.productForm.get("cantidad"))?null:r.touched)),t.R7$(),t.Y8G("ngIf",(null==(f=n.productForm.get("cantidad"))?null:f.invalid)&&(null==(f=n.productForm.get("cantidad"))?null:f.touched)),t.R7$(4),t.AVh("border-red-500",(null==(_=n.productForm.get("status"))?null:_.invalid)&&(null==(_=n.productForm.get("status"))?null:_.touched)),t.R7$(13),t.Y8G("ngIf",(null==(b=n.productForm.get("status"))?null:b.invalid)&&(null==(b=n.productForm.get("status"))?null:b.touched)),t.R7$(4),t.AVh("border-red-500",(null==(E=n.productForm.get("ubicacion"))?null:E.invalid)&&(null==(E=n.productForm.get("ubicacion"))?null:E.touched)),t.R7$(),t.Y8G("ngIf",(null==(k=n.productForm.get("ubicacion"))?null:k.invalid)&&(null==(k=n.productForm.get("ubicacion"))?null:k.touched))}}function U(e,p){if(1&e&&(t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"div",38),t.k0s(),t.j41(4,"h2",2),t.EFF(5),t.k0s(),t.j41(6,"p",39),t.EFF(7),t.k0s()(),t.j41(8,"div",40)(9,"div",84)(10,"div")(11,"label",85),t.EFF(12," Fecha de Vencimiento "),t.k0s(),t.nrm(13,"input",86),t.j41(14,"p",87),t.EFF(15," Solo para productos perecederos "),t.k0s()(),t.j41(16,"div")(17,"label",88),t.EFF(18," Lote "),t.k0s(),t.nrm(19,"input",89),t.k0s(),t.j41(20,"div")(21,"label",90),t.EFF(22," Notas "),t.k0s(),t.nrm(23,"textarea",91),t.k0s()()()()),2&e){const o=t.XpG();t.R7$(3),t.Y8G("innerHTML",o.wizardSteps[3].icon,t.npT),t.R7$(2),t.SpI(" ",o.wizardSteps[3].title," "),t.R7$(2),t.JRh(o.wizardSteps[3].subtitle)}}function H(e,p){if(1&e){const o=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(o);const r=t.XpG();return t.Njj(r.nextStep())}),t.j41(1,"span"),t.EFF(2,"Siguiente"),t.k0s(),t.qSk(),t.j41(3,"svg",5),t.nrm(4,"path",93),t.k0s()()}if(2&e){const o=t.XpG();t.Y8G("disabled",!o.isCurrentStepValid())}}function X(e,p){1&e&&(t.qSk(),t.j41(0,"svg",95),t.nrm(1,"circle",96)(2,"path",97),t.k0s())}function K(e,p){if(1&e){const o=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(o);const r=t.XpG();return t.Njj(r.onSubmit())}),t.DNE(1,X,3,0,"svg",94),t.j41(2,"span"),t.EFF(3),t.k0s()()}if(2&e){const o=t.XpG();t.Y8G("disabled",o.productForm.invalid||o.isSubmitting),t.R7$(),t.Y8G("ngIf",o.isSubmitting),t.R7$(2),t.JRh(o.isSubmitting?o.isEditing?"Actualizando...":"Guardando...":o.isEditing?"Actualizar Producto":"Guardar Producto")}}let W=(()=>{class e{constructor(o,i,r,f){this.formBuilder=o,this.productService=i,this.route=r,this.router=f,this.isEditing=!1,this.productId=null,this.isSubmitting=!1,this.currentStep=1,this.totalSteps=4,this.wizardSteps=[{id:1,title:"Informaci\xf3n B\xe1sica",subtitle:"Datos principales del producto",icon:'<svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"></path><path fill-rule="evenodd" d="M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>',fields:["nombre","descripcion","marca","proveedor"]},{id:2,title:"C\xf3digos y Categorizaci\xf3n",subtitle:"C\xf3digos y clasificaci\xf3n",icon:'<svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>',fields:["codigo1","codigo2","rubro","categoria"]},{id:3,title:"Inventario y Precio",subtitle:"Pricing y stock inicial",icon:'<svg fill="currentColor" viewBox="0 0 20 20"><path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"></path></svg>',fields:["precio","cantidad","status","ubicacion"]},{id:4,title:"Detalles Adicionales",subtitle:"Informaci\xf3n complementaria",icon:'<svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>',fields:["fechaVencimiento","lote","notas"]}],this.Math=Math,this.productForm=this.createForm()}ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id"),this.isEditing=!!this.productId,this.isEditing&&this.productId&&this.loadProduct(this.productId)}createForm(){return this.formBuilder.group({nombre:["",[d.k0.required]],descripcion:["",[d.k0.required]],precio:["",[d.k0.required,d.k0.min(0)]],proveedor:["",[d.k0.required]],cantidad:["",[d.k0.required,d.k0.min(0)]],codigo1:["",[d.k0.required]],codigo2:["",[d.k0.required]],rubro:["",[d.k0.required]],categoria:["",[d.k0.required]],marca:["",[d.k0.required]],fechaVencimiento:[""],lote:[""],status:["",[d.k0.required]],notas:[""],ubicacion:["",[d.k0.required]]})}loadProduct(o){this.productService.getProduct(o).subscribe({next:i=>{i&&this.productForm.patchValue({nombre:i.nombre,descripcion:i.descripcion,precio:i.precio,proveedor:i.proveedor,cantidad:i.cantidad,codigo1:i.codigo1,codigo2:i.codigo2,rubro:i.rubro,categoria:i.categoria,marca:i.marca,fechaVencimiento:i.fechaVencimiento?new Date(i.fechaVencimiento).toISOString().split("T")[0]:"",lote:i.lote||"",status:i.status,notas:i.notas||"",ubicacion:i.ubicacion})},error:i=>{console.error("Error al cargar producto:",i),alert("Error al cargar el producto. Regresando a la lista."),this.router.navigate(["/productos"])}})}nextStep(){this.isCurrentStepValid()&&this.currentStep<this.totalSteps&&this.currentStep++}previousStep(){this.currentStep>1&&this.currentStep--}isCurrentStepValid(){return this.wizardSteps[this.currentStep-1].fields.every(i=>{const r=this.productForm.get(i);return!r||r.valid})}onSubmit(){if(this.productForm.valid){this.isSubmitting=!0;const o=this.productForm.value;(this.isEditing?this.productService.updateProduct(this.productId,o):this.productService.createProduct(o)).subscribe({next:()=>{alert(this.isEditing?"Producto actualizado exitosamente":"Producto creado exitosamente"),this.router.navigate(["/productos"])},error:r=>{console.error("Error al guardar producto:",r),alert("Error al guardar el producto. Intenta de nuevo."),this.isSubmitting=!1}})}else Object.keys(this.productForm.controls).forEach(o=>{const i=this.productForm.get(o);i?.invalid&&i.markAsTouched()})}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(d.ok),t.rXU(T.b),t.rXU(F.nX),t.rXU(F.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-product-form"]],standalone:!0,features:[t.aNF],decls:39,vars:20,consts:[[1,"space-y-8"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],["routerLink","/productos",1,"btn","btn-secondary","flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"card","p-6"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"mt-6"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-primary-600","h-2","rounded-full","transition-all","duration-500","ease-in-out"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"space-y-6",3,"formGroup"],["class","card p-8",4,"ngIf"],[1,"flex","justify-between","items-center","pt-8"],["type","button",1,"btn","btn-secondary","flex","items-center","space-x-2",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","space-x-3"],["routerLink","/productos",1,"btn","btn-secondary"],["type","button","class","btn btn-primary flex items-center space-x-2",3,"disabled","click",4,"ngIf"],[1,"flex","items-center"],[1,"flex","items-center","relative"],[1,"w-10","h-10","rounded-full","border-2","flex","items-center","justify-center","transition-all","duration-300",3,"ngClass"],["class","w-5 h-5","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","text-sm font-medium",4,"ngIf"],["class","ml-4 min-w-0",4,"ngIf"],["class","hidden sm:block w-16 h-0.5 mx-4 transition-all duration-300",3,"ngClass",4,"ngIf"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"text-sm","font-medium"],[1,"ml-4","min-w-0"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"hidden","sm:block","w-16","h-0.5","mx-4","transition-all","duration-300",3,"ngClass"],[1,"card","p-8"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-primary-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"w-8","h-8","text-primary-600",3,"innerHTML"],[1,"text-gray-600","mt-2"],[1,"max-w-2xl","mx-auto","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"md:col-span-2"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","nombre","type","text","formControlName","nombre","placeholder","Ingrese el nombre del producto",1,"input"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Descripci\xf3n detallada del producto",1,"input"],["for","marca",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","marca","type","text","formControlName","marca","placeholder","Marca del producto",1,"input"],["for","proveedor",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","proveedor","type","text","formControlName","proveedor","placeholder","Nombre del proveedor",1,"input"],[1,"mt-1","text-sm","text-red-600"],["for","codigo1",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","codigo1","type","text","formControlName","codigo1","placeholder","C\xf3digo principal",1,"input"],["for","codigo2",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","codigo2","type","text","formControlName","codigo2","placeholder","C\xf3digo secundario",1,"input"],["for","rubro",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","rubro","formControlName","rubro",1,"input"],["value",""],["value","Electr\xf3nicos"],["value","Farmacia"],["value","Alimentos"],["value","Ropa"],["value","Hogar"],["value","Deportes"],["value","Automotriz"],["value","Construcci\xf3n"],["for","categoria",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","categoria","type","text","formControlName","categoria","placeholder","Categor\xeda espec\xedfica",1,"input"],["for","precio",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","precio","type","number","step","0.01","min","0","formControlName","precio","placeholder","0.00",1,"input"],["for","cantidad",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","cantidad","type","number","min","0","formControlName","cantidad","placeholder","0",1,"input"],["for","status",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","status","formControlName","status",1,"input"],["value","ACTIVO"],["value","INACTIVO"],["value","AGOTADO"],["value","VENCIDO"],["value","RESERVADO"],["for","ubicacion",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","ubicacion","type","text","formControlName","ubicacion","placeholder","Ej: Almac\xe9n A - Estante 1",1,"input"],[4,"ngIf"],[1,"space-y-6"],["for","fechaVencimiento",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","fechaVencimiento","type","date","formControlName","fechaVencimiento",1,"input"],[1,"mt-1","text-sm","text-gray-500"],["for","lote",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","lote","type","text","formControlName","lote","placeholder","N\xfamero de lote",1,"input"],["for","notas",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","notas","formControlName","notas","rows","4","placeholder","Notas adicionales sobre el producto",1,"input"],["type","button",1,"btn","btn-primary","flex","items-center","space-x-2",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","animate-spin -ml-1 mr-2 h-4 w-4","fill","none","viewBox","0 0 24 24",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t.EFF(4),t.k0s(),t.j41(5,"p",3),t.EFF(6),t.k0s()(),t.j41(7,"a",4),t.qSk(),t.j41(8,"svg",5),t.nrm(9,"path",6),t.k0s(),t.joV(),t.j41(10,"span"),t.EFF(11,"Volver"),t.k0s()()(),t.j41(12,"div",7)(13,"div",1),t.DNE(14,l,7,9,"div",8),t.k0s(),t.j41(15,"div",9)(16,"div",10),t.nrm(17,"div",11),t.k0s(),t.j41(18,"div",12)(19,"span"),t.EFF(20),t.k0s(),t.j41(21,"span"),t.EFF(22),t.k0s()()()(),t.j41(23,"form",13),t.DNE(24,I,30,15,"div",14)(25,L,48,15,"div",14)(26,R,42,15,"div",14)(27,U,24,3,"div",14),t.j41(28,"div",15)(29,"button",16),t.bIt("click",function(){return r.previousStep()}),t.qSk(),t.j41(30,"svg",5),t.nrm(31,"path",17),t.k0s(),t.joV(),t.j41(32,"span"),t.EFF(33,"Anterior"),t.k0s()(),t.j41(34,"div",18)(35,"a",19),t.EFF(36," Cancelar "),t.k0s(),t.DNE(37,H,5,1,"button",20)(38,K,4,3,"button",20),t.k0s()()()()),2&i&&(t.R7$(4),t.SpI(" ",r.isEditing?"Editar Producto":"Nuevo Producto"," "),t.R7$(2),t.SpI(" ",r.isEditing?"Modifica los datos del producto":"Completa los siguientes pasos para agregar un nuevo producto"," "),t.R7$(8),t.Y8G("ngForOf",r.wizardSteps),t.R7$(3),t.xc7("width",r.currentStep/r.totalSteps*100,"%"),t.R7$(3),t.Lme("Paso ",r.currentStep," de ",r.totalSteps,""),t.R7$(2),t.SpI("",r.Math.round(r.currentStep/r.totalSteps*100),"% completado"),t.R7$(),t.Y8G("formGroup",r.productForm),t.R7$(),t.Y8G("ngIf",1===r.currentStep),t.R7$(),t.Y8G("ngIf",2===r.currentStep),t.R7$(),t.Y8G("ngIf",3===r.currentStep),t.R7$(),t.Y8G("ngIf",4===r.currentStep),t.R7$(2),t.AVh("opacity-50",1===r.currentStep)("cursor-not-allowed",1===r.currentStep),t.Y8G("disabled",1===r.currentStep),t.R7$(8),t.Y8G("ngIf",r.currentStep<r.totalSteps),t.R7$(),t.Y8G("ngIf",r.currentStep===r.totalSteps))},dependencies:[x.MD,x.YU,x.Sq,x.bT,F.iI,F.Wk,d.X1,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.VZ,d.j4,d.JD],encapsulation:2})}}return e})()},2181:(V,j,m)=>{m.d(j,{Sz:()=>x,UB:()=>F,vT:()=>d});var x=function(t){return t.ACTIVO="ACTIVO",t.INACTIVO="INACTIVO",t.AGOTADO="AGOTADO",t.VENCIDO="VENCIDO",t.RESERVADO="RESERVADO",t}(x||{}),F=function(t){return t.ENTRADA="ENTRADA",t.SALIDA="SALIDA",t.AJUSTE="AJUSTE",t.TRANSFERENCIA="TRANSFERENCIA",t.DEVOLUCION="DEVOLUCION",t}(F||{}),d=function(t){return t.STOCK_BAJO="STOCK_BAJO",t.PRODUCTO_VENCIDO="PRODUCTO_VENCIDO",t.PRODUCTO_POR_VENCER="PRODUCTO_POR_VENCER",t.STOCK_AGOTADO="STOCK_AGOTADO",t}(d||{})},6241:(V,j,m)=>{m.d(j,{b:()=>O});var x=m(4412),F=m(7673),d=m(8810),t=m(6354),T=m(8384),g=m(2181),S=m(4438),w=m(7156);let O=(()=>{class P{constructor(l){this.http=l,this.products=new x.t([]),this.movements=new x.t([]),this.alerts=new x.t([]),this.products$=this.products.asObservable(),this.movements$=this.movements.asObservable(),this.alerts$=this.alerts.asObservable(),this.loadDemoData()}loadDemoData(){const l=[{id:"1",nombre:"Laptop HP Pavilion",descripcion:"Laptop HP Pavilion 15.6 pulgadas, 8GB RAM, 256GB SSD",precio:899.99,proveedor:"HP Inc.",cantidad:15,codigo1:"HP-LAP-001",codigo2:"PAV-156-8256",imagenes:["laptop-hp.jpg"],rubro:"Electr\xf3nicos",categoria:"Computadoras",marca:"HP",fechaVencimiento:void 0,lote:"LOT-2024-001",status:g.Sz.ACTIVO,notas:"Modelo m\xe1s vendido de la marca",ubicacion:"Almac\xe9n A - Estante 1",fechaCreacion:new Date("2024-01-15"),fechaActualizacion:new Date("2024-01-20")},{id:"2",nombre:"Mouse Inal\xe1mbrico Logitech",descripcion:"Mouse inal\xe1mbrico Logitech MX Master 3",precio:79.99,proveedor:"Logitech",cantidad:5,codigo1:"LOG-MOU-001",codigo2:"MX-MST-3",imagenes:["mouse-logitech.jpg"],rubro:"Electr\xf3nicos",categoria:"Accesorios",marca:"Logitech",fechaVencimiento:void 0,lote:"LOT-2024-002",status:g.Sz.ACTIVO,notas:"Stock bajo - reabastecer pronto",ubicacion:"Almac\xe9n A - Estante 2",fechaCreacion:new Date("2024-01-10"),fechaActualizacion:new Date("2024-01-18")},{id:"3",nombre:"Medicamento Paracetamol",descripcion:"Paracetamol 500mg - Caja con 20 tabletas",precio:5.99,proveedor:"Farmac\xe9utica ABC",cantidad:0,codigo1:"MED-PAR-001",codigo2:"PAR-500-20",imagenes:["paracetamol.jpg"],rubro:"Farmacia",categoria:"Analg\xe9sicos",marca:"Gen\xe9rico",fechaVencimiento:new Date("2024-12-31"),lote:"LOT-2024-003",status:g.Sz.AGOTADO,notas:"Producto agotado - pedido urgente",ubicacion:"Farmacia - Estante B",fechaCreacion:new Date("2024-01-05"),fechaActualizacion:new Date("2024-01-22")}],s=[{id:"1",productId:"1",tipo:g.UB.ENTRADA,cantidad:20,cantidadAnterior:0,cantidadNueva:20,motivo:"Compra inicial de inventario",usuario:"admin@inventory.com",fecha:new Date("2024-01-15"),lote:"LOT-2024-001",ubicacion:"Almac\xe9n A - Estante 1"},{id:"2",productId:"1",tipo:g.UB.SALIDA,cantidad:5,cantidadAnterior:20,cantidadNueva:15,motivo:"Venta al cliente",usuario:"manager@inventory.com",fecha:new Date("2024-01-20"),lote:"LOT-2024-001",ubicacion:"Almac\xe9n A - Estante 1"}],v=[{id:"1",productId:"2",tipo:g.vT.STOCK_BAJO,message:"Stock bajo: Mouse Inal\xe1mbrico Logitech (5 unidades)",fecha:new Date,leido:!1},{id:"2",productId:"3",tipo:g.vT.STOCK_AGOTADO,message:"Stock agotado: Medicamento Paracetamol",fecha:new Date,leido:!1}];this.products.next(l),this.movements.next(s),this.alerts.next(v)}getProducts(){return this.products$}getProduct(l){return this.products$.pipe((0,t.T)(s=>s.find(v=>v.id===l)))}createProduct(l){const s={id:this.generateId(),...l,precio:Number(l.precio),cantidad:Number(l.cantidad),imagenes:[],fechaVencimiento:l.fechaVencimiento?new Date(l.fechaVencimiento):void 0,fechaCreacion:new Date,fechaActualizacion:new Date};return this.products.next([...this.products.value,s]),this.addInventoryMovement({productId:s.id,tipo:g.UB.ENTRADA,cantidad:s.cantidad,cantidadAnterior:0,cantidadNueva:s.cantidad,motivo:"Creaci\xf3n de producto",usuario:"current-user",fecha:new Date,lote:s.lote,ubicacion:s.ubicacion}),(0,F.of)(s).pipe((0,T.c)(500))}updateProduct(l,s){const v=this.products.value,C=v.findIndex(y=>y.id===l);if(-1===C)return(0,d.$)(()=>new Error("Producto no encontrado"));const D=v[C],I={...D,...s,precio:Number(s.precio),cantidad:Number(s.cantidad),fechaVencimiento:s.fechaVencimiento?new Date(s.fechaVencimiento):void 0,fechaActualizacion:new Date};if(D.cantidad!==I.cantidad){const y=I.cantidad-D.cantidad;this.addInventoryMovement({productId:l,tipo:y>0?g.UB.ENTRADA:g.UB.SALIDA,cantidad:Math.abs(y),cantidadAnterior:D.cantidad,cantidadNueva:I.cantidad,motivo:"Ajuste de inventario",usuario:"current-user",fecha:new Date,lote:I.lote,ubicacion:I.ubicacion})}return v[C]=I,this.products.next([...v]),(0,F.of)(I).pipe((0,T.c)(500))}deleteProduct(l){const v=this.products.value.filter(C=>C.id!==l);return this.products.next(v),(0,F.of)(!0).pipe((0,T.c)(500))}getInventoryMovements(){return this.movements$}addInventoryMovement(l){const s={id:this.generateId(),...l};this.movements.next([s,...this.movements.value])}getStockAlerts(){return this.alerts$}markAlertAsRead(l){const s=this.alerts.value,v=s.findIndex(C=>C.id===l);return-1!==v&&(s[v].leido=!0,this.alerts.next([...s])),(0,F.of)(!0)}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,5)}searchProducts(l){return this.products$.pipe((0,t.T)(s=>s.filter(v=>v.nombre.toLowerCase().includes(l.toLowerCase())||v.codigo1.toLowerCase().includes(l.toLowerCase())||v.codigo2.toLowerCase().includes(l.toLowerCase())||v.marca.toLowerCase().includes(l.toLowerCase()))))}getProductsByCategory(l){return this.products$.pipe((0,t.T)(s=>s.filter(v=>v.categoria===l)))}getLowStockProducts(l=10){return this.products$.pipe((0,t.T)(s=>s.filter(v=>v.cantidad<=l)))}static{this.\u0275fac=function(s){return new(s||P)(S.KVO(w.Qq))}}static{this.\u0275prov=S.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}}return P})()},8384:(V,j,m)=>{m.d(j,{c:()=>Y});var x=m(8359);class F extends x.yU{constructor(a,c){super()}schedule(a,c=0){return this}}const d={setInterval(h,a,...c){const{delegate:u}=d;return u?.setInterval?u.setInterval(h,a,...c):setInterval(h,a,...c)},clearInterval(h){const{delegate:a}=d;return(a?.clearInterval||clearInterval)(h)},delegate:void 0};var t=m(7908);const g={now:()=>(g.delegate||Date).now(),delegate:void 0};class S{constructor(a,c=S.now){this.schedulerActionCtor=a,this.now=c}schedule(a,c=0,u){return new this.schedulerActionCtor(this,a).schedule(u,c)}}S.now=g.now;const O=new class w extends S{constructor(a,c=S.now){super(a,c),this.actions=[],this._active=!1}flush(a){const{actions:c}=this;if(this._active)return void c.push(a);let u;this._active=!0;do{if(u=a.execute(a.state,a.delay))break}while(a=c.shift());if(this._active=!1,u){for(;a=c.shift();)a.unsubscribe();throw u}}}(class T extends F{constructor(a,c){super(a,c),this.scheduler=a,this.work=c,this.pending=!1}schedule(a,c=0){var u;if(this.closed)return this;this.state=a;const A=this.id,R=this.scheduler;return null!=A&&(this.id=this.recycleAsyncId(R,A,c)),this.pending=!0,this.delay=c,this.id=null!==(u=this.id)&&void 0!==u?u:this.requestAsyncId(R,this.id,c),this}requestAsyncId(a,c,u=0){return d.setInterval(a.flush.bind(a,this),u)}recycleAsyncId(a,c,u=0){if(null!=u&&this.delay===u&&!1===this.pending)return c;null!=c&&d.clearInterval(c)}execute(a,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const u=this._execute(a,c);if(u)return u;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,c){let A,u=!1;try{this.work(a)}catch(R){u=!0,A=R||new Error("Scheduled action threw falsy error")}if(u)return this.unsubscribe(),A}unsubscribe(){if(!this.closed){const{id:a,scheduler:c}=this,{actions:u}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.o)(u,this),null!=a&&(this.id=this.recycleAsyncId(c,a,null)),this.delay=null,super.unsubscribe()}}}),P=O;var N=m(8793),l=m(6697),s=m(9974),v=m(4360),C=m(5343),I=m(3703),y=m(1397),M=m(8750);function $(h,a){return a?c=>(0,N.x)(a.pipe((0,l.s)(1),function D(){return(0,s.N)((h,a)=>{h.subscribe((0,v._)(a,C.l))})}()),c.pipe($(h))):(0,y.Z)((c,u)=>(0,M.Tg)(h(c,u)).pipe((0,l.s)(1),(0,I.u)(c)))}var G=m(1985),L=m(9470);function Y(h,a=O){const c=function B(h=0,a,c=P){let u=-1;return null!=a&&((0,L.m)(a)?c=a:u=a),new G.c(A=>{let R=function z(h){return h instanceof Date&&!isNaN(h)}(h)?+h-c.now():h;R<0&&(R=0);let U=0;return c.schedule(function(){A.closed||(A.next(U++),0<=u?this.schedule(void 0,u):A.complete())},R)})}(h,a);return $(()=>c)}}}]);