"use strict";(self.webpackChunkrecuento_inventory=self.webpackChunkrecuento_inventory||[]).push([[633],{2025:(M,E,s)=>{s.d(E,{S:()=>A,n:()=>l});var A=function(d){return d.PENDIENTE="PENDIENTE",d.PROCESADA="PROCESADA",d.RECHAZADA="RECHAZADA",d}(A||{}),l=function(d){return d.PENDIENTE="PENDIENTE",d.ENTREGADO="ENTREGADO",d.PARCIAL="PARCIAL",d}(l||{})},2181:(M,E,s)=>{s.d(E,{Sz:()=>A,UB:()=>l,vT:()=>d});var A=function(c){return c.ACTIVO="ACTIVO",c.INACTIVO="INACTIVO",c.AGOTADO="AGOTADO",c.VENCIDO="VENCIDO",c.RESERVADO="RESERVADO",c}(A||{}),l=function(c){return c.ENTRADA="ENTRADA",c.SALIDA="SALIDA",c.AJUSTE="AJUSTE",c.TRANSFERENCIA="TRANSFERENCIA",c.DEVOLUCION="DEVOLUCION",c}(l||{}),d=function(c){return c.STOCK_BAJO="STOCK_BAJO",c.PRODUCTO_VENCIDO="PRODUCTO_VENCIDO",c.PRODUCTO_POR_VENCER="PRODUCTO_POR_VENCER",c.STOCK_AGOTADO="STOCK_AGOTADO",c}(d||{})},5633:(M,E,s)=>{s.d(E,{p:()=>T});var A=s(4412),l=s(7673),d=s(8384),c=s(2025),I=s(4438),v=s(7156),m=s(6241);let T=(()=>{class f{constructor(a,e){this.http=a,this.productService=e,this.invoices=new A.t([]),this.invoices$=this.invoices.asObservable(),this.loadDemoData()}loadDemoData(){this.invoices.next([{id:"1",numeroFactura:"FAC-2024-001",fecha:new Date("2024-01-20"),proveedor:"HP Inc.",productos:[{id:"1",descripcion:"Laptop HP Pavilion",cantidad:2,precioUnitario:899.99,subtotal:1799.98}],montoTotal:1799.98,documentos:[],solicitudPedidoId:"1",estado:c.S.PROCESADA,fechaCreacion:new Date("2024-01-20"),usuarioCreacion:"admin@inventory.com",notas:"Factura procesada correctamente"}])}getInvoices(){return this.invoices$}getInvoice(a){const n=this.invoices.value.find(i=>i.id===a);return(0,l.of)(n)}getInvoicesByOrderRequest(a){const n=this.invoices.value.filter(i=>i.solicitudPedidoId===a);return(0,l.of)(n)}createInvoice(a){const e={id:this.generateId(),numeroFactura:a.numeroFactura,fecha:new Date(a.fecha),proveedor:a.proveedor,productos:a.productos,montoTotal:a.montoTotal,documentos:[],solicitudPedidoId:a.solicitudPedidoId,estado:c.S.PENDIENTE,fechaCreacion:new Date,usuarioCreacion:"current-user",notas:a.notas};return this.invoices.next([e,...this.invoices.value]),this.addProductsToInventory(e.productos),(0,l.of)(e).pipe((0,d.c)(500))}addProductsToInventory(a){a.forEach(e=>{console.log(`Adding ${e.cantidad} units of ${e.descripcion} to inventory`)})}uploadDocument(a,e){const n={id:this.generateId(),nombre:e.name,url:URL.createObjectURL(e),tipo:e.type,tama\u00f1o:e.size,fechaSubida:new Date},i=this.invoices.value,h=i.findIndex(P=>P.id===a);return-1!==h&&(i[h].documentos.push(n),this.invoices.next([...i])),(0,l.of)(n).pipe((0,d.c)(1e3))}updateInvoiceStatus(a,e){const n=this.invoices.value,i=n.findIndex(h=>h.id===a);return-1!==i&&(n[i].estado=e,this.invoices.next([...n])),(0,l.of)(!0).pipe((0,d.c)(300))}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,5)}generateInvoiceNumber(){const a=new Date;return`FAC-${a.getFullYear()}${String(a.getMonth()+1).padStart(2,"0")}${String(a.getDate()).padStart(2,"0")}-${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}`}static{this.\u0275fac=function(e){return new(e||f)(I.KVO(v.Qq),I.KVO(m.b))}}static{this.\u0275prov=I.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},6241:(M,E,s)=>{s.d(E,{b:()=>f});var A=s(4412),l=s(7673),d=s(8810),c=s(6354),I=s(8384),v=s(2181),m=s(4438),T=s(7156);let f=(()=>{class g{constructor(e){this.http=e,this.products=new A.t([]),this.movements=new A.t([]),this.alerts=new A.t([]),this.products$=this.products.asObservable(),this.movements$=this.movements.asObservable(),this.alerts$=this.alerts.asObservable(),this.loadDemoData()}loadDemoData(){const e=[{id:"1",nombre:"Laptop HP Pavilion",descripcion:"Laptop HP Pavilion 15.6 pulgadas, 8GB RAM, 256GB SSD",precio:899.99,proveedor:"HP Inc.",cantidad:15,codigo1:"HP-LAP-001",codigo2:"PAV-156-8256",imagenes:["laptop-hp.jpg"],rubro:"Electr\xf3nicos",categoria:"Computadoras",marca:"HP",fechaVencimiento:void 0,lote:"LOT-2024-001",status:v.Sz.ACTIVO,notas:"Modelo m\xe1s vendido de la marca",ubicacion:"Almac\xe9n A - Estante 1",fechaCreacion:new Date("2024-01-15"),fechaActualizacion:new Date("2024-01-20")},{id:"2",nombre:"Mouse Inal\xe1mbrico Logitech",descripcion:"Mouse inal\xe1mbrico Logitech MX Master 3",precio:79.99,proveedor:"Logitech",cantidad:5,codigo1:"LOG-MOU-001",codigo2:"MX-MST-3",imagenes:["mouse-logitech.jpg"],rubro:"Electr\xf3nicos",categoria:"Accesorios",marca:"Logitech",fechaVencimiento:void 0,lote:"LOT-2024-002",status:v.Sz.ACTIVO,notas:"Stock bajo - reabastecer pronto",ubicacion:"Almac\xe9n A - Estante 2",fechaCreacion:new Date("2024-01-10"),fechaActualizacion:new Date("2024-01-18")},{id:"3",nombre:"Medicamento Paracetamol",descripcion:"Paracetamol 500mg - Caja con 20 tabletas",precio:5.99,proveedor:"Farmac\xe9utica ABC",cantidad:0,codigo1:"MED-PAR-001",codigo2:"PAR-500-20",imagenes:["paracetamol.jpg"],rubro:"Farmacia",categoria:"Analg\xe9sicos",marca:"Gen\xe9rico",fechaVencimiento:new Date("2024-12-31"),lote:"LOT-2024-003",status:v.Sz.AGOTADO,notas:"Producto agotado - pedido urgente",ubicacion:"Farmacia - Estante B",fechaCreacion:new Date("2024-01-05"),fechaActualizacion:new Date("2024-01-22")}],n=[{id:"1",productId:"1",tipo:v.UB.ENTRADA,cantidad:20,cantidadAnterior:0,cantidadNueva:20,motivo:"Compra inicial de inventario",usuario:"admin@inventory.com",fecha:new Date("2024-01-15"),lote:"LOT-2024-001",ubicacion:"Almac\xe9n A - Estante 1"},{id:"2",productId:"1",tipo:v.UB.SALIDA,cantidad:5,cantidadAnterior:20,cantidadNueva:15,motivo:"Venta al cliente",usuario:"manager@inventory.com",fecha:new Date("2024-01-20"),lote:"LOT-2024-001",ubicacion:"Almac\xe9n A - Estante 1"}],i=[{id:"1",productId:"2",tipo:v.vT.STOCK_BAJO,message:"Stock bajo: Mouse Inal\xe1mbrico Logitech (5 unidades)",fecha:new Date,leido:!1},{id:"2",productId:"3",tipo:v.vT.STOCK_AGOTADO,message:"Stock agotado: Medicamento Paracetamol",fecha:new Date,leido:!1}];this.products.next(e),this.movements.next(n),this.alerts.next(i)}getProducts(){return this.products$}getProduct(e){return this.products$.pipe((0,c.T)(n=>n.find(i=>i.id===e)))}createProduct(e){const n={id:this.generateId(),...e,precio:Number(e.precio),cantidad:Number(e.cantidad),imagenes:[],fechaVencimiento:e.fechaVencimiento?new Date(e.fechaVencimiento):void 0,fechaCreacion:new Date,fechaActualizacion:new Date};return this.products.next([...this.products.value,n]),this.addInventoryMovement({productId:n.id,tipo:v.UB.ENTRADA,cantidad:n.cantidad,cantidadAnterior:0,cantidadNueva:n.cantidad,motivo:"Creaci\xf3n de producto",usuario:"current-user",fecha:new Date,lote:n.lote,ubicacion:n.ubicacion}),(0,l.of)(n).pipe((0,I.c)(500))}updateProduct(e,n){const i=this.products.value,h=i.findIndex(C=>C.id===e);if(-1===h)return(0,d.$)(()=>new Error("Producto no encontrado"));const P=i[h],p={...P,...n,precio:Number(n.precio),cantidad:Number(n.cantidad),fechaVencimiento:n.fechaVencimiento?new Date(n.fechaVencimiento):void 0,fechaActualizacion:new Date};if(P.cantidad!==p.cantidad){const C=p.cantidad-P.cantidad;this.addInventoryMovement({productId:e,tipo:C>0?v.UB.ENTRADA:v.UB.SALIDA,cantidad:Math.abs(C),cantidadAnterior:P.cantidad,cantidadNueva:p.cantidad,motivo:"Ajuste de inventario",usuario:"current-user",fecha:new Date,lote:p.lote,ubicacion:p.ubicacion})}return i[h]=p,this.products.next([...i]),(0,l.of)(p).pipe((0,I.c)(500))}deleteProduct(e){const i=this.products.value.filter(h=>h.id!==e);return this.products.next(i),(0,l.of)(!0).pipe((0,I.c)(500))}getInventoryMovements(){return this.movements$}addInventoryMovement(e){const n={id:this.generateId(),...e};this.movements.next([n,...this.movements.value])}getStockAlerts(){return this.alerts$}markAlertAsRead(e){const n=this.alerts.value,i=n.findIndex(h=>h.id===e);return-1!==i&&(n[i].leido=!0,this.alerts.next([...n])),(0,l.of)(!0)}generateId(){return Date.now().toString()+Math.random().toString(36).substr(2,5)}searchProducts(e){return this.products$.pipe((0,c.T)(n=>n.filter(i=>i.nombre.toLowerCase().includes(e.toLowerCase())||i.codigo1.toLowerCase().includes(e.toLowerCase())||i.codigo2.toLowerCase().includes(e.toLowerCase())||i.marca.toLowerCase().includes(e.toLowerCase()))))}getProductsByCategory(e){return this.products$.pipe((0,c.T)(n=>n.filter(i=>i.categoria===e)))}getLowStockProducts(e=10){return this.products$.pipe((0,c.T)(n=>n.filter(i=>i.cantidad<=e)))}static{this.\u0275fac=function(n){return new(n||g)(m.KVO(T.Qq))}}static{this.\u0275prov=m.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},8384:(M,E,s)=>{s.d(E,{c:()=>b});var A=s(8359);class l extends A.yU{constructor(t,o){super()}schedule(t,o=0){return this}}const d={setInterval(u,t,...o){const{delegate:r}=d;return r?.setInterval?r.setInterval(u,t,...o):setInterval(u,t,...o)},clearInterval(u){const{delegate:t}=d;return(t?.clearInterval||clearInterval)(u)},delegate:void 0};var c=s(7908);const v={now:()=>(v.delegate||Date).now(),delegate:void 0};class m{constructor(t,o=m.now){this.schedulerActionCtor=t,this.now=o}schedule(t,o=0,r){return new this.schedulerActionCtor(this,t).schedule(r,o)}}m.now=v.now;const f=new class T extends m{constructor(t,o=m.now){super(t,o),this.actions=[],this._active=!1}flush(t){const{actions:o}=this;if(this._active)return void o.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=o.shift());if(this._active=!1,r){for(;t=o.shift();)t.unsubscribe();throw r}}}(class I extends l{constructor(t,o){super(t,o),this.scheduler=t,this.work=o,this.pending=!1}schedule(t,o=0){var r;if(this.closed)return this;this.state=t;const D=this.id,O=this.scheduler;return null!=D&&(this.id=this.recycleAsyncId(O,D,o)),this.pending=!0,this.delay=o,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(O,this.id,o),this}requestAsyncId(t,o,r=0){return d.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,o,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return o;null!=o&&d.clearInterval(o)}execute(t,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,o);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,o){let D,r=!1;try{this.work(t)}catch(O){r=!0,D=O||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),D}unsubscribe(){if(!this.closed){const{id:t,scheduler:o}=this,{actions:r}=o;this.work=this.state=this.scheduler=null,this.pending=!1,(0,c.o)(r,this),null!=t&&(this.id=this.recycleAsyncId(o,t,null)),this.delay=null,super.unsubscribe()}}}),g=f;var a=s(8793),e=s(6697),n=s(9974),i=s(4360),h=s(5343),p=s(3703),C=s(1397),L=s(8750);function R(u,t){return t?o=>(0,a.x)(t.pipe((0,e.s)(1),function P(){return(0,n.N)((u,t)=>{u.subscribe((0,i._)(t,h.l))})}()),o.pipe(R(u))):(0,C.Z)((o,r)=>(0,L.Tg)(u(o,r)).pipe((0,e.s)(1),(0,p.u)(o)))}var w=s(1985),N=s(9470);function b(u,t=f){const o=function x(u=0,t,o=g){let r=-1;return null!=t&&((0,N.m)(t)?o=t:r=t),new w.c(D=>{let O=function S(u){return u instanceof Date&&!isNaN(u)}(u)?+u-o.now():u;O<0&&(O=0);let U=0;return o.schedule(function(){D.closed||(D.next(U++),0<=r?this.schedule(void 0,r):D.complete())},O)})}(u,t);return R(()=>o)}}}]);